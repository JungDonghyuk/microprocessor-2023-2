#include <SPI.h>

volatile uint8_t RECEIVED;// 최적화 막기 위해 uint대신 volatile사용

void setup() {
  SPI.begin();
  Serial.begin(9600);
  SPI.attachInterrupt();
  DDRB |= 0xFF;
  pinMode(MISO, OUTPUT);
  pinMode(MOSI, INPUT);
  pinMode(SCK, INPUT);
  pinMode(SS, INPUT);

  SPCR |= (1<<SPIE)| (1<<SPE) | (0 << SPR1) | (1<<SPR0);
  SPCR &= ~(1<<MSTR);
}
ISR (SPI_STC_vect) {
  DDRB |= 0xFF;
  RECEIVED = (SPDR<<8) ; 
  PORTB |= RECEIVED; 
  Serial.println(RECEIVED);
}

void loop(){

}
