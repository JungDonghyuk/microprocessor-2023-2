#include <SPI.h>

volatile uint8_t RECEIVED;// 최적화 막기 위해 uint대신 volatile사용

void setup() {
  SPI.begin();
  Serial.begin(9600);
  SPI.attachInterrupt();
  DDRB |= 0xFF;
  pinMode(MISO, OUTPUT);
  pinMode(MOSI, INPUT);
  pinMode(SCK, INPUT);
  pinMode(SS, INPUT);

  SPCR |= (1<<SPIE)| (1<<SPE) | (0 << SPR1) | (1<<SPR0);
  SPCR &= ~(1<<MSTR);
}
ISR (SPI_STC_vect) {
  DDRD = 0xFF;
  RECEIVED = (SPDR) ; 
  PORTD = RECEIVED; 
  for(int i=7; i>=0; i--) {
    Serial.print((RECEIVED >> i) & 0x1); 
  }
Serial.println();
}
void loop(){

}
